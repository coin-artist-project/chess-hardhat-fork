// We require the Hardhat Runtime Environment explicitly here. This is optional
// but useful for running the script in a standalone fashion through `node <script>`.
//
// When running the script with `hardhat run <script>` you'll find the Hardhat
// Runtime Environment's members available in the global scope.
const hre = require('hardhat');
// scripts/create-box.js
const { ethers, upgrades } = require('hardhat');

const ABI = require('../abis/erc1155ABI.js');
const PIECES_OWNER = '0x148e2ed011a9eaaa200795f62889d68153eeacde';
const CONTRACT_ADDRESS = '0x5e30b1d6f920364c847512e2528efdadf72a97a9';

const SEND_TO_DEST_ADDRESS = ' ** YOUR_ADDRESS_HERE ** ';

const TO_IMPERSONATE = [PIECES_OWNER];
const IMPERSONATED = [];

const pieceIds = [
    {"name" : "Pawn, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274029058348286552"},
    {"name" : "Pawn, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274029058348286552"},
    {"name" : "Pawn, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274029058348286552"},
    {"name" : "Pawn, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274029058348286552"},
    {"name" : "Pawn, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274029058348286552"},
    {"name" : "Pawn, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274029058348286552"},
    {"name" : "Pawn, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274029058348286552"},
    {"name" : "Pawn, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274029058348286552"},
    {"name" : "Rook, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274040053464564312"},
    {"name" : "Rook, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274040053464564312"},
    {"name" : "Knight, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274038953952936536"},
    {"name" : "Knight, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274038953952936536"},
    {"name" : "Bishop, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274037854441308760"},
    {"name" : "Bishop, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274037854441308760"},
    {"name" : "King, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274041152976192088"},
    {"name" : "Queen, White Blue", "id": "9297472344724926092841919778025655237517835814992492894761274042252487819864"},
    {"name" : "Pawn, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274027958836658776"},
    {"name" : "Pawn, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274027958836658776"},
    {"name" : "Pawn, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274027958836658776"},
    {"name" : "Pawn, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274027958836658776"},
    {"name" : "Pawn, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274027958836658776"},
    {"name" : "Pawn, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274027958836658776"},
    {"name" : "Pawn, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274027958836658776"},
    {"name" : "Pawn, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274027958836658776"},
    {"name" : "Rook, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274034555906425432"},
    {"name" : "Rook, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274034555906425432"},
    {"name" : "Knight, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274033456394797656"},
    {"name" : "Knight, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274033456394797656"},
    {"name" : "Bishop, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274032356883169880"},
    {"name" : "Bishop, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274032356883169880"},
    {"name" : "King, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274035655418053208"},
    {"name" : "Queen, Black Blue", "id": "9297472344724926092841919778025655237517835814992492894761274036754929680984"}
];

async function main() {
  // impersonate accounts holding items
  for (const toImpersonate of TO_IMPERSONATE) {
    await hre.network.provider.request({
      method: 'hardhat_impersonateAccount',
      params: [toImpersonate],
    });

    IMPERSONATED.push(await ethers.provider.getSigner(toImpersonate));
  }

  let openseaStorefrontContract = await ethers.getContractAt(ABI, CONTRACT_ADDRESS);

  const sleep = (duration) =>
    new Promise((resolve) => setTimeout(resolve, duration));

  for (let i = 0; i < pieceIds.length; i++) {
    await openseaStorefrontContract.connect(IMPERSONATED[0]).safeTransferFrom(
      PIECES_OWNER,
      SEND_TO_DEST_ADDRESS,
      pieceIds[i].id,
      1,
      "0x00"
    );
    await sleep(250);
  }
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
